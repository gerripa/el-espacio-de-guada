<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Espacio Personal</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=Lora:wght@400;500&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --bg-primary: #f9f6f2;
            --bg-secondary: #fff;
            --text-primary: #4a4a4a;
            --text-secondary: #8b8b8b;
            --accent: #d4a574;
            --accent-light: #e8d4c0;
            --border: #e5ddd5;
            --shadow: rgba(0, 0, 0, 0.08);
        }
        
        body.dark-mode {
            --bg-primary: #2a2522;
            --bg-secondary: #3a3532;
            --text-primary: #e8e0d8;
            --text-secondary: #b8b0a8;
            --accent: #d4a574;
            --accent-light: #8b7355;
            --border: #4a4542;
            --shadow: rgba(0, 0, 0, 0.3);
        }
        
        body {
            font-family: 'Lora', serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: all 0.3s ease;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, var(--accent-light) 0%, var(--accent) 100%);
            border-radius: 0 0 30px 30px;
            box-shadow: 0 4px 20px var(--shadow);
            margin-bottom: 40px;
        }
        
        h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3em;
            font-weight: 300;
            color: var(--bg-secondary);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }
        
        .quote {
            font-style: italic;
            color: var(--bg-primary);
            font-size: 1.1em;
            margin-top: 15px;
        }
        
        .mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 2px 10px var(--shadow);
        }
        
        .mode-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px var(--shadow);
        }
        
        nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            font-family: 'Cormorant Garamond', serif;
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            color: var(--text-primary);
        }
        
        .nav-btn:hover, .nav-btn.active {
            background: var(--accent);
            border-color: var(--accent);
            color: var(--bg-secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px var(--shadow);
        }
        
        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .card {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 15px var(--shadow);
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 25px var(--shadow);
        }
        
        h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.2em;
            color: var(--accent);
            margin-bottom: 20px;
            font-weight: 400;
        }
        
        h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5em;
            color: var(--accent);
            margin: 20px 0 15px 0;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px 18px;
            margin: 10px 0;
            border: 2px solid var(--border);
            border-radius: 15px;
            font-family: 'Lora', serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
            font-size: 1em;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(212, 165, 116, 0.1);
        }
        
        textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        button {
            background: var(--accent);
            color: var(--bg-secondary);
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1em;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        button:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px var(--shadow);
        }
        
        .day-section {
            background: var(--bg-primary);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 4px solid var(--accent);
        }
        
        .day-header {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.4em;
            color: var(--accent);
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .note-item {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 3px solid var(--accent-light);
        }
        
        .note-time {
            color: var(--text-secondary);
            font-size: 0.85em;
            margin-bottom: 8px;
        }
        
        .delete-btn {
            background: #c07070;
        }
        
        .delete-btn:hover {
            background: #a05050;
        }
        
        .song-item, .reminder-item, .task-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: var(--bg-primary);
            border-radius: 15px;
            margin: 10px 0;
            transition: all 0.3s ease;
        }
        
        .song-item:hover, .reminder-item:hover, .task-item:hover {
            background: var(--accent-light);
        }
        
        .reminder-item.completed, .task-item.completed {
            opacity: 0.6;
        }
        
        .reminder-item.completed .reminder-text,
        .task-item.completed .task-text {
            text-decoration: line-through;
        }
        
        .checkbox {
            width: 24px;
            height: 24px;
            margin-right: 15px;
            cursor: pointer;
        }
        
        .item-content {
            flex: 1;
        }
        
        .item-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .file-upload-area {
            border: 2px dashed var(--border);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 15px 0;
        }
        
        .file-upload-area:hover {
            border-color: var(--accent);
            background: var(--accent-light);
        }
        
        .file-item {
            background: var(--bg-primary);
            padding: 12px;
            border-radius: 10px;
            margin: 8px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: var(--bg-primary);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid var(--border);
        }
        
        .stat-number {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.5em;
            color: var(--accent);
            font-weight: 600;
        }
        
        .stat-label {
            color: var(--text-secondary);
            margin-top: 5px;
        }
        
        .mood-selector {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .mood-btn {
            font-size: 2em;
            background: var(--bg-primary);
            border: 2px solid var(--border);
            padding: 15px 20px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .mood-btn:hover, .mood-btn.selected {
            transform: scale(1.2);
            border-color: var(--accent);
            box-shadow: 0 5px 15px var(--shadow);
        }
        
        .goals-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .goal-card {
            background: var(--bg-primary);
            padding: 20px;
            border-radius: 15px;
            border-left: 4px solid var(--accent);
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--border);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--accent);
            transition: width 0.3s ease;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }
            
            nav {
                flex-direction: column;
            }
            
            .song-item, .reminder-item, .task-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .item-actions {
                width: 100%;
                margin-top: 10px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="mode-toggle" onclick="toggleDarkMode()">üåô</div>
    
    <header>
        <h1>‚ú® Mi Espacio Personal ‚ú®</h1>
        <div class="quote" id="dailyQuote"></div>
    </header>
    
    <div class="container">
        <nav>
            <button class="nav-btn active" onclick="showSection('home')">üè† Inicio</button>
            <button class="nav-btn" onclick="showSection('journal')">üìñ Diario</button>
            <button class="nav-btn" onclick="showSection('songs')">üé∂ M√∫sica</button>
            <button class="nav-btn" onclick="showSection('reminders')">üìÖ Recordatorios</button>
            <button class="nav-btn" onclick="showSection('faculty')">üéì Facultad</button>
            <button class="nav-btn" onclick="showSection('goals')">üéØ Metas</button>
            <button class="nav-btn" onclick="showSection('photos')">üì∑ Fotos</button>
        </nav>
        
        <!-- HOME SECTION -->
        <div id="home" class="section active">
            <div class="card">
                <h2>Bienvenida a tu espacio üí´</h2>
                <p style="text-align: center; margin: 20px 0;">Hoy es <strong id="todayDate"></strong></p>
                
                <h3>¬øC√≥mo te sent√≠s hoy?</h3>
                <div class="mood-selector">
                    <button class="mood-btn" onclick="saveMood('üòä')" title="Feliz">üòä</button>
                    <button class="mood-btn" onclick="saveMood('üòå')" title="Tranquilo">üòå</button>
                    <button class="mood-btn" onclick="saveMood('üòî')" title="Triste">üòî</button>
                    <button class="mood-btn" onclick="saveMood('üò§')" title="Enojado">üò§</button>
                    <button class="mood-btn" onclick="saveMood('üò¥')" title="Cansado">üò¥</button>
                    <button class="mood-btn" onclick="saveMood('ü§ó')" title="Emocionado">ü§ó</button>
                </div>
                <div id="moodHistory" style="margin-top: 20px;"></div>
            </div>
            
            <div class="card">
                <h2>Resumen de Hoy</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="statNotes">0</div>
                        <div class="stat-label">Notas escritas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="statTasks">0</div>
                        <div class="stat-label">Tareas pendientes</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="statGoals">0</div>
                        <div class="stat-label">Metas activas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="statDays">0</div>
                        <div class="stat-label">D√≠as registrados</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- JOURNAL SECTION -->
        <div id="journal" class="section">
            <div class="card">
                <h2>Mi Diario Personal üìñ</h2>
                <textarea id="journalText" placeholder="¬øQu√© pas√≥ hoy? ¬øC√≥mo te sent√≠s?"></textarea>
                <button onclick="addJournalNote()">üíæ Guardar Nota</button>
            </div>
            <div id="journalDays"></div>
        </div>
        
        <!-- SONGS SECTION -->
        <div id="songs" class="section">
            <div class="card">
                <h2>Mi Playlist Personal üé∂</h2>
                <input type="text" id="songName" placeholder="Nombre de la canci√≥n">
                <input type="text" id="songArtist" placeholder="Artista">
                <input type="url" id="songLink" placeholder="Link (Spotify/YouTube)">
                <button onclick="addSong()">‚ûï Agregar Canci√≥n</button>
            </div>
            <div id="songsList"></div>
        </div>
        
        <!-- REMINDERS SECTION -->
        <div id="reminders" class="section">
            <div class="card">
                <h2>Recordatorios Personales üìÖ</h2>
                <input type="text" id="reminderText" placeholder="¬øQu√© necesit√°s recordar?">
                <input type="date" id="reminderDate">
                <button onclick="addReminder()">‚ûï Agregar Recordatorio</button>
            </div>
            <div id="remindersList"></div>
        </div>
        
        <!-- FACULTY SECTION -->
        <div id="faculty" class="section">
            <div class="card">
                <h2>Tareas de Facultad üéì</h2>
                <input type="text" id="taskSubject" placeholder="Materia">
                <textarea id="taskDescription" placeholder="¬øQu√© ten√©s que hacer? (Ej: Leer cap 3, hacer TP, estudiar para parcial)"></textarea>
                <input type="date" id="taskDate" placeholder="Fecha de entrega">
                <div class="file-upload-area" onclick="document.getElementById('taskFile').click()">
                    üìé Click para adjuntar archivos (PDF, Word, im√°genes, etc.)
                </div>
                <input type="file" id="taskFile" style="display:none" multiple>
                <div id="taskFilesList"></div>
                <select id="taskPriority">
                    <option value="baja">Prioridad Baja</option>
                    <option value="media">Prioridad Media</option>
                    <option value="alta">Prioridad Alta</option>
                </select>
                <button onclick="addTask()">‚ûï Agregar Tarea</button>
            </div>
            <div id="tasksList"></div>
        </div>
        
        <!-- GOALS SECTION -->
        <div id="goals" class="section">
            <div class="card">
                <h2>Mis Metas Personales üéØ</h2>
                <input type="text" id="goalTitle" placeholder="¬øQu√© quer√©s lograr?">
                <textarea id="goalDescription" placeholder="Describe tu meta..."></textarea>
                <input type="date" id="goalDeadline" placeholder="Fecha l√≠mite">
                <button onclick="addGoal()">‚ûï Crear Meta</button>
            </div>
            <div class="goals-container" id="goalsList"></div>
        </div>
        
        <!-- PHOTOS SECTION -->
        <div id="photos" class="section">
            <div class="card">
                <h2>Mis Recuerdos üì∑</h2>
                <div class="file-upload-area" onclick="document.getElementById('photoUpload').click()">
                    üì∑ Click para subir fotos
                </div>
                <input type="file" id="photoUpload" accept="image/*" multiple style="display:none">
                <input type="text" id="photoCaption" placeholder="Descripci√≥n de la foto (opcional)">
                <button onclick="addPhotos()">üíæ Guardar Fotos</button>
            </div>
            <div id="photoGallery" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px;"></div>
        </div>
    </div>
    
    <script>
        const quotes = [
            "Long live all the magic we made ‚ú®",
            "Shake it off, I'm just gonna shake it off üíÉ",
            "This is a new year, a new beginning üåü",
            "You are what you love, not who loves you üí´",
            "It's okay to not be okay sometimes ü§ç",
            "The best people in life are free üíù",
            "We never go out of style ‚ú®",
            "Everything will be alright if we just keep dancing üíÉ",
            "People throw rocks at things that shine üíé",
            "This night is sparkling, don't you let it go üåô"
        ];
        
        function setDailyQuote() {
            const today = new Date().toDateString();
            let quoteIndex = Number(today.split('').reduce((a,b) => a + b.charCodeAt(0), 0)) % quotes.length;
            document.getElementById('dailyQuote').textContent = quotes[quoteIndex];
        }
        
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            document.querySelector('.mode-toggle').textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
        }
        
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
            
            if (sectionId === 'home') updateStats();
        }
        
        function getTodayKey() {
            return new Date().toLocaleDateString('es-AR');
        }
        
        // JOURNAL FUNCTIONS
        function addJournalNote() {
            const text = document.getElementById('journalText').value.trim();
            if (!text) return alert('Escrib√≠ algo primero');
            
            const data = JSON.parse(localStorage.getItem('journal') || '{}');
            const today = getTodayKey();
            
            if (!data[today]) data[today] = [];
            
            data[today].push({
                id: Date.now(),
                text: text,
                time: new Date().toLocaleTimeString('es-AR', { hour: '2-digit', minute: '2-digit' })
            });
            
            localStorage.setItem('journal', JSON.stringify(data));
            document.getElementById('journalText').value = '';
            loadJournal();
            updateStats();
        }
        
        function loadJournal() {
            const data = JSON.parse(localStorage.getItem('journal') || '{}');
            const container = document.getElementById('journalDays');
            const days = Object.keys(data).sort().reverse();
            
            container.innerHTML = days.map(day => `
                <div class="day-section">
                    <div class="day-header">
                        <span>üìÖ ${day}</span>
                        <button class="delete-btn" onclick="deleteDay('${day}')">üóëÔ∏è Borrar d√≠a</button>
                    </div>
                    ${data[day].map(note => `
                        <div class="note-item">
                            <div class="note-time">${note.time}</div>
                            <div>${note.text}</div>
                            <button style="margin-top: 10px; padding: 8px 20px;" class="delete-btn" onclick="deleteNote('${day}', ${note.id})">üóëÔ∏è</button>
                        </div>
                    `).join('')}
                </div>
            `).join('');
        }
        
        function deleteNote(day, id) {
            const data = JSON.parse(localStorage.getItem('journal') || '{}');
            data[day] = data[day].filter(n => n.id !== id);
            if (data[day].length === 0) delete data[day];
            localStorage.setItem('journal', JSON.stringify(data));
            loadJournal();
        }
        
        function deleteDay(day) {
            if (!confirm('¬øEliminar todas las notas de este d√≠a?')) return;
            const data = JSON.parse(localStorage.getItem('journal') || '{}');
            delete data[day];
            localStorage.setItem('journal', JSON.stringify(data));
            loadJournal();
        }
        
        // SONGS FUNCTIONS
        function addSong() {
            const name = document.getElementById('songName').value.trim();
            const artist = document.getElementById('songArtist').value.trim();
            const link = document.getElementById('songLink').value.trim();
            
            if (!name) return alert('Escrib√≠ el nombre de la canci√≥n');
            
            const songs = JSON.parse(localStorage.getItem('songs') || '[]');
            songs.push({ id: Date.now(), name, artist, link });
            localStorage.setItem('songs', JSON.stringify(songs));
            
            document.getElementById('songName').value = '';
            document.getElementById('songArtist').value = '';
            document.getElementById('songLink').value = '';
            loadSongs();
        }
        
        function loadSongs() {
            const songs = JSON.parse(localStorage.getItem('songs') || '[]');
            const container = document.getElementById('songsList');
            
            container.innerHTML = songs.map(song => `
                <div class="song-item card">
                    <div class="item-content">
                        <strong>üéµ ${song.name}</strong><br>
                        ${song.artist ? `<span style="color: var(--text-secondary)">${song.artist}</span>` : ''}
                    </div>
                    <div class="item-actions">
                        ${song.link ? `<button onclick="window.open('${song.link}', '_blank')">‚ñ∂Ô∏è Abrir</button>` : ''}
                        <button class="delete-btn" onclick="deleteSong(${song.id})">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');
        }
        
        function deleteSong(id) {
            let songs = JSON.parse(localStorage.getItem('songs') || '[]');
            songs = songs.filter(s => s.id !== id);
            localStorage.setItem('songs', JSON.stringify(songs));
            loadSongs();
        }
        
        // REMINDERS FUNCTIONS
        function addReminder() {
            const text = document.getElementById('reminderText').value.trim();
            const date = document.getElementById('reminderDate').value;
            
            if (!text) return alert('Escrib√≠ un recordatorio');
            
            const reminders = JSON.parse(localStorage.getItem('reminders') || '[]');
            reminders.push({ id: Date.now(), text, date, completed: false });
            localStorage.setItem('reminders', JSON.stringify(reminders));
            
            document.getElementById('reminderText').value = '';
            document.getElementById('reminderDate').value = '';
            loadReminders();
        }
        
        function loadReminders() {
            const reminders = JSON.parse(localStorage.getItem('reminders') || '[]');
            const container = document.getElementById('remindersList');
            
            container.innerHTML = reminders.map(r => `
                <div class="reminder-item ${r.completed ? 'completed' : ''}">
                    <input type="checkbox" class="checkbox" ${r.completed ? 'checked' : ''} 
                           onchange="toggleReminder(${r.id})">
                    <div class="item-content">
                        <span class="reminder-text">${r.text}</span><br>
                        ${r.date ? `<small style="color: var(--text-secondary)">üìÖ ${r.date}</small>` : ''}
                    </div>
                    <button class="delete-btn" onclick="deleteReminder(${r.id})">üóëÔ∏è</button>
                </div>
            `).join('');
        }
        
        function toggleReminder(id) {
            const reminders = JSON.parse(localStorage.getItem('reminders') || '[]');
            const reminder = reminders.find(r => r.id === id);
            reminder.completed = !reminder.completed;
            localStorage.setItem('reminders', JSON.stringify(reminders));
            loadReminders();
        }
        
        function deleteReminder(id) {
            let reminders = JSON.parse(localStorage.getItem('reminders') || '[]');
            reminders = reminders.filter(r => r.id !== id);
            localStorage.setItem('reminders', JSON.stringify(reminders));
            loadReminders();
        }
        
        // FACULTY TASKS
        let currentFiles = [];
        
        document.getElementById('taskFile').addEventListener('change', function(e) {
            currentFiles = Array.from(e.target.files);
            const filesList = document.getElementById('taskFilesList');
            filesList.innerHTML = currentFiles.map((f, i) => `
                <div class="file-item">
                    <span>üìé ${f.name}</span>
                    <button class="delete-btn" onclick="removeFile(${i})">‚úï</button>
                </div>
            `).join('');
        });
        
        function removeFile(index) {
            currentFiles.splice(index, 1);
            const dt = new DataTransfer();
            currentFiles.forEach(f => dt.items.add(f));
            document.getElementById('taskFile').files = dt.files;
            document.getElementById('taskFile').dispatchEvent(new Event('change'));
        }
        
        function addTask() {
            const subject = document.getElementById('taskSubject').value.trim();
            const description = document.getElementById('taskDescription').value.trim();
            const date = document.getElementById('taskDate').value;
            const priority = document.getElementById('taskPriority').value;
            
            if (!subject || !description) return alert('Complet√° materia y descripci√≥n');
            
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            
            const filePromises = Array.from(currentFiles).map(file => {
                return new Promise((resolve) => {
                    const reader = new FileReader();
                    reader.onload = (e) => resolve({
                        name: file.name,
                        type: file.type,
                        data: e.target.result
                    });
                    reader.readAsDataURL(file);
                });
            });
            
            Promise.all(filePromises).then(files => {
                tasks.push({
                    id: Date.now(),
                    subject,
                    description,
                    date,
                    priority,
                    files,
                    completed: false
                });
                
                localStorage.setItem('tasks', JSON.stringify(tasks));
                document.getElementById('taskSubject').value = '';
                document.getElementById('taskDescription').value = '';
                document.getElementById('taskDate').value = '';
                document.getElementById('taskFile').value = '';
                document.getElementById('taskFilesList').innerHTML = '';
                currentFiles = [];
                loadTasks();
                updateStats();
            });
        }
        
        function loadTasks() {
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            const container = document.getElementById('tasksList');
            
            const priorityColors = {
                'baja': '#90c090',
                'media': '#f0c050',
                'alta': '#e08080'
            };
            
            container.innerHTML = tasks.map(task => `
                <div class="task-item card ${task.completed ? 'completed' : ''}">
                    <input type="checkbox" class="checkbox" ${task.completed ? 'checked' : ''} 
                           onchange="toggleTask(${task.id})">
                    <div class="item-content">
                        <strong class="task-text" style="color: ${priorityColors[task.priority]}">üìö ${task.subject}</strong><br>
                        <span class="task-text">${task.description}</span><br>
                        ${task.date ? `<small style="color: var(--text-secondary)">üìÖ ${task.date}</small>` : ''}
                        ${task.files.length > 0 ? `<div style="margin-top: 10px;">
                            ${task.files.map(f => `
                                <div class="file-item">
                                    <span>üìé ${f.name}</span>
                                    <button onclick="downloadFile('${f.name}', '${f.data}')">‚¨áÔ∏è Descargar</button>
                                </div>
                            `).join('')}
                        </div>` : ''}
                    </div>
                    <button class="delete-btn" onclick="deleteTask(${task.id})">üóëÔ∏è</button>
                </div>
            `).join('');
        }
        
        function toggleTask(id) {
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            const task = tasks.find(t => t.id === id);
            task.completed = !task.completed;
            localStorage.setItem('tasks', JSON.stringify(tasks));
            loadTasks();
            updateStats();
        }
        
        function deleteTask(id) {
            let tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            tasks = tasks.filter(t => t.id !== id);
            localStorage.setItem('tasks', JSON.stringify(tasks));
            loadTasks();
            updateStats();
        }
        
        function downloadFile(filename, dataUrl) {
            const a = document.createElement('a');
            a.href = dataUrl;
            a.download = filename;
            a.click();
        }
        
        // GOALS FUNCTIONS
        function addGoal() {
            const title = document.getElementById('goalTitle').value.trim();
            const description = document.getElementById('goalDescription').value.trim();
            const deadline = document.getElementById('goalDeadline').value;
            
            if (!title) return alert('Escrib√≠ el t√≠tulo de tu meta');
            
            const goals = JSON.parse(localStorage.getItem('goals') || '[]');
            goals.push({
                id: Date.now(),
                title,
                description,
                deadline,
                progress: 0
            });
            
            localStorage.setItem('goals', JSON.stringify(goals));
            document.getElementById('goalTitle').value = '';
            document.getElementById('goalDescription').value = '';
            document.getElementById('goalDeadline').value = '';
            loadGoals();
            updateStats();
        }
        
        function loadGoals() {
            const goals = JSON.parse(localStorage.getItem('goals') || '[]');
            const container = document.getElementById('goalsList');
            
            container.innerHTML = goals.map(goal => `
                <div class="goal-card">
                    <h3>${goal.title}</h3>
                    <p>${goal.description}</p>
                    ${goal.deadline ? `<p style="color: var(--text-secondary); font-size: 0.9em;">üóìÔ∏è ${goal.deadline}</p>` : ''}
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${goal.progress}%"></div>
                    </div>
                    <p style="text-align: center; margin: 10px 0;">${goal.progress}% completado</p>
                    <input type="range" min="0" max="100" value="${goal.progress}" 
                           onchange="updateGoalProgress(${goal.id}, this.value)"
                           style="width: 100%;">
                    <button class="delete-btn" onclick="deleteGoal(${goal.id})" style="width: 100%; margin-top: 10px;">üóëÔ∏è Eliminar</button>
                </div>
            `).join('');
        }
        
        function updateGoalProgress(id, progress) {
            const goals = JSON.parse(localStorage.getItem('goals') || '[]');
            const goal = goals.find(g => g.id === id);
            goal.progress = parseInt(progress);
            localStorage.setItem('goals', JSON.stringify(goals));
            loadGoals();
        }
        
        function deleteGoal(id) {
            let goals = JSON.parse(localStorage.getItem('goals') || '[]');
            goals = goals.filter(g => g.id !== id);
            localStorage.setItem('goals', JSON.stringify(goals));
            loadGoals();
            updateStats();
        }
        
        // PHOTOS FUNCTIONS
        document.getElementById('photoUpload').addEventListener('change', function() {
            const caption = document.getElementById('photoCaption').value.trim();
            if (this.files.length > 0 && caption) {
                document.querySelector('#photos button').textContent = 'üíæ Guardar ' + this.files.length + ' foto(s)';
            }
        });
        
        function addPhotos() {
            const files = document.getElementById('photoUpload').files;
            const caption = document.getElementById('photoCaption').value.trim();
            
            if (files.length === 0) return alert('Seleccion√° al menos una foto');
            
            const photos = JSON.parse(localStorage.getItem('photos') || '[]');
            
            const filePromises = Array.from(files).map(file => {
                return new Promise((resolve) => {
                    const reader = new FileReader();
                    reader.onload = (e) => resolve({
                        id: Date.now() + Math.random(),
                        data: e.target.result,
                        caption: caption,
                        date: getTodayKey()
                    });
                    reader.readAsDataURL(file);
                });
            });
            
            Promise.all(filePromises).then(newPhotos => {
                photos.push(...newPhotos);
                localStorage.setItem('photos', JSON.stringify(photos));
                document.getElementById('photoUpload').value = '';
                document.getElementById('photoCaption').value = '';
                loadPhotos();
            });
        }
        
        function loadPhotos() {
            const photos = JSON.parse(localStorage.getItem('photos') || '[]');
            const container = document.getElementById('photoGallery');
            
            container.innerHTML = photos.map(photo => `
                <div class="card" style="padding: 10px;">
                    <img src="${photo.data}" style="width: 100%; height: 200px; object-fit: cover; border-radius: 10px;">
                    ${photo.caption ? `<p style="margin-top: 10px; font-size: 0.9em;">${photo.caption}</p>` : ''}
                    <small style="color: var(--text-secondary)">${photo.date}</small>
                    <button class="delete-btn" onclick="deletePhoto(${photo.id})" style="width: 100%; margin-top: 10px;">üóëÔ∏è</button>
                </div>
            `).join('');
        }
        
        function deletePhoto(id) {
            let photos = JSON.parse(localStorage.getItem('photos') || '[]');
            photos = photos.filter(p => p.id !== id);
            localStorage.setItem('photos', JSON.stringify(photos));
            loadPhotos();
        }
        
        // MOOD TRACKING
        function saveMood(emoji) {
            const moods = JSON.parse(localStorage.getItem('moods') || '{}');
            const today = getTodayKey();
            moods[today] = emoji;
            localStorage.setItem('moods', JSON.stringify(moods));
            
            document.querySelectorAll('.mood-btn').forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
            
            loadMoodHistory();
        }
        
        function loadMoodHistory() {
            const moods = JSON.parse(localStorage.getItem('moods') || '{}');
            const container = document.getElementById('moodHistory');
            const days = Object.keys(moods).sort().reverse().slice(0, 7);
            
            if (days.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">A√∫n no registraste tu estado de √°nimo</p>';
                return;
            }
            
            container.innerHTML = '<h3>√öltima semana</h3>' + days.map(day => `
                <div style="display: flex; justify-content: space-between; padding: 10px; background: var(--bg-primary); border-radius: 10px; margin: 5px 0;">
                    <span>${day}</span>
                    <span style="font-size: 1.5em;">${moods[day]}</span>
                </div>
            `).join('');
        }
        
        // STATS
        function updateStats() {
            const journal = JSON.parse(localStorage.getItem('journal') || '{}');
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            const goals = JSON.parse(localStorage.getItem('goals') || '[]');
            
            const today = getTodayKey();
            const todayNotes = journal[today] ? journal[today].length : 0;
            const pendingTasks = tasks.filter(t => !t.completed).length;
            const activeGoals = goals.length;
            const totalDays = Object.keys(journal).length;
            
            document.getElementById('statNotes').textContent = todayNotes;
            document.getElementById('statTasks').textContent = pendingTasks;
            document.getElementById('statGoals').textContent = activeGoals;
            document.getElementById('statDays').textContent = totalDays;
        }
        
        // INIT
        window.onload = function() {
            setDailyQuote();
            document.getElementById('todayDate').textContent = new Date().toLocaleDateString('es-AR', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            loadJournal();
            loadSongs();
            loadReminders();
            loadTasks();
            loadGoals();
            loadPhotos();
            loadMoodHistory();
            updateStats();
            
            const today = getTodayKey();
            const moods = JSON.parse(localStorage.getItem('moods') || '{}');
            if (moods[today]) {
                document.querySelectorAll('.mood-btn').forEach(btn => {
                    if (btn.textContent.includes(moods[today])) {
                        btn.classList.add('selected');
                    }
                });
            }
        };
    </script>
</body>
</html>